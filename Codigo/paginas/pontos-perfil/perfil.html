<!doctype html>
<html lang="pt-br">

<head>
    <title>"perfil" Template screen</title>
</head>

<body>
    <div id="#Perfil" class="row pt-4 container" style="width:100%;height:auto;color:black;background-color:transparent;padding:10px;display: flex; flex-direction: column; align-items: center;">
        <!-- Avatar content-->
        <div class="col-12 col-sm-12 col-md-12 col-lg-8">
            <div class="chooseAvatar row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 mb-4"
                    style="width: 100%; display: flex; justify-content: space-between;">
                    <div>
                        <div id="perfilFoto">
                            <img src="assets/imgDashboard/monstro3-200px.png" class="imgPerfil" alt="Perfil" id="perfilSelec" width="60px">
                            <p class="nome" id="NomeUsuario"></p>
                        </div>
                    </div>
                    <div>
                        <h5 class="npontos">Moedas: <span id="moedas" class="pontos"></span></h5>
                        <h5 class="npontos">Nível: <span id="nivel" class="pontos"></span></h5>
                    </div>
                </div>

                <div class="row avatarContent">
                    <h6>Avatares:</h6>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2">
                        <button type="button" onclick="setarAvatar('avatar1')" class="selectAvatar mb-3" style="width: 60px; height: 60px;border: none; background-color: transparent;">
                            <div class="selectAvatar mb-2">
                                <img id="avatar1" src="assets/imgDashboard/monstro3-200px.png" class="avatarUnlocked imgPerfil"
                                    alt="Perfil" width="60px">
                            </div>
                        </button>
                        <div>liberado</div>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2">
                        <button type="button" onclick="setarAvatar('avatar2')" class="selectAvatar mb-3" style="width: 60px; height: 60px;border: none; background-color: transparent;">
                            <div class="selectAvatar mb-2">
                                <img id="avatar2" src="assets/imgDashboard/monstro5-200px.png" class="avatarUnlocked imgPerfil"
                                    alt="Perfil" width="60px">
                            </div>
                        </button>
                        <div>liberado</div>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2">
                        <button type="button" onclick="avatarBloqueado()" class="selectAvatar mb-3" style="width: 60px; height: 60px;border: none; background-color: transparent;">
                            <div class="selectAvatar mb-2">
                                <img id="avatar3" src="assets/imgDashboard/montro1-200px.png" class="imgPerfil"
                                    alt="Perfil" width="50px">
                            </div>
                        </button>
                        <div>1500 moedas</div>
                    </div>
                    <div class="col-6 col-sm-6 col-md-4 col-lg-2">
                        <button type="button" onclick="avatarBloqueado()" class="selectAvatar mb-3" style="width: 60px; height: 60px;border: none; background-color: transparent;">
                            <div class="selectAvatar mb-2">
                                <img id="avatar4" src="assets/imgDashboard/monstro6-200px.png" class="imgPerfil"
                                    alt="Perfil" width="60px">
                            </div>
                        </button>
                        <div>3000 moedas</div>
                    </div>
                </div>
            </div>

            <!--Recommendations-->

            <div class="mt-4 pt-4">
                <div class="recommendations">
                    <h4 id="contentTitle" class="border-bottom">Próximas Atividades:</h4>
                    <div class="row">
                        <div class="content-card">
                            <div class="card">
                                <div class="card-body">
                                    <div class="card-text">
                                        <h5 class="card-title">Advinhe a Palavra</h5>
                                        <p>Português</p>
                                    </div>
                                    <img class="card-img-top" src="./assets/imgDashboard/testeCapaAtiv1.png"
                                        alt="Card image cap">
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="card-text">
                                        <h5 class="card-title">Caça Palavras</h5>
                                        <p>Português</p>
                                    </div>
                                    <img class="card-img-top" src="./assets/imgDashboard/capaCacaPalavras.png"
                                        alt="Card image cap">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>
    <script>
        var icone = document.getElementById("perfilSelec");
        var perfil = localStorage.getItem("perfil");
        icone.setAttribute("src", JSON.parse(perfil));

        var userName = document.getElementById("NomeUsuario");
        var NomeUsuario = localStorage.getItem("userLogado");
        userName.innerText = JSON.parse(NomeUsuario);

        function setarAvatar(id){
            var perfilAtual = icone.getAttribute("src");
            var itemClicado = document.getElementById(id);
            var srcClicado = itemClicado.getAttribute("src");
            if(perfilAtual != srcClicado){
                if ((confirm("Quer usar essa foto de perfil?")) == true) {
                    icone.setAttribute("src", srcClicado);
                    localStorage.setItem("perfil", JSON.stringify(srcClicado));
                } 
            } else {
                alert("O avalar selecionado já está sendo utilizado!")
            }
        };

        function avatarBloqueado(){
            alert("Este avatar ainda está bloqueado! Consiga mais pontos com as atividades!")
        }

        function calcularMoedas(){
            const notas = JSON.parse(localStorage.getItem("pontuacao"));
            console.log("notas", notas);
            const somaTotal = notas.Portugues1 + notas.Portugues2 + notas.Matematica1 + notas.Matematica2;
            document.getElementById("moedas").innerText = somaTotal;
            calcularNivel(somaTotal);
        }

        function calcularNivel(valor){
            if(valor < 100){
                document.getElementById("nivel").innerText = 1;
            } else if(valor > 100 && valor <= 200){
                document.getElementById("nivel").innerText = 2;
            } else if(valor > 200 && valor <= 300){
                document.getElementById("nivel").innerText = 3;
            } else {
                document.getElementById("nivel").innerText = 4;
            }
        }

        calcularMoedas();

    </script>
</body>

</html>